{% extends "base.html" %}

{% block title %}‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å - ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û{% endblock %}

{% block navbar_links %}
    {% if role == 'admin' or role == 'patient' %}
        <a href="{{ url_for('register_patient') }}" class="nav-link">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</a>
    {% endif %}

    {% if role == 'admin' %}
        <a href="{{ url_for('pending_doctors') }}" class="nav-link">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏°‡∏≠</a>

        <!-- Dropdown ‡πÄ‡∏°‡∏ô‡∏π‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <div class="dropdown">
            <div class="nav-link" id="dropdownBtn" style="cursor:pointer;">
                ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚ñº
            </div>
            <div id="dropdownMenu">
                <a href="{{ url_for('view_table', table_name='users') }}">Users</a>
                <a href="{{ url_for('view_table', table_name='patient') }}">Patient</a>
                <a href="{{ url_for('view_table', table_name='learn') }}">Learn</a>
                <a href="{{ url_for('view_table', table_name='followup') }}">Follow Up</a>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block content %}

<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£</h1>
        <p class="hero-subtitle"></p>
        
        <div class="button-container">
            <div class="service-card">
                <div class="service-icon">üìö</div>
                <h3>‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ</h3>
                <p>‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á</p>
                <a href="/learn" class="btn btn-primary">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
                </a>
            </div>
            
            <div class="service-card">
                <div class="service-icon">üìπ</div>
                <h3>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
                <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡∏•</p>

                {% if role == 'doctor' %}
                    <a href="{{ url_for('videocall_doctor') }}" class="btn btn-secondary">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡∏•
                    </a>
                {% elif role == 'patient' %}
                    <a href="{{ url_for('videocall_patient') }}" class="btn btn-secondary">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡∏•
                    </a>
                {% elif role == 'admin' %}
                    <div class="admin-select-call">
                        <select onchange="if(this.value) window.location.href=this.value;">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡∏•</option>
                            <option value="{{ url_for('videocall_doctor') }}">doctor</option>
                            <option value="{{ url_for('videocall_patient') }}">patient</option>
                        </select>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Dropdown script loaded');
    
    const btn = document.getElementById('dropdownBtn');
    const menu = document.getElementById('dropdownMenu');

    console.log('Button:', btn);
    console.log('Menu:', menu);

    if (btn && menu) {
        // Toggle dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å
        btn.addEventListener('click', function(e){
            e.preventDefault();
            e.stopPropagation();
            console.log('Dropdown clicked!');
            menu.classList.toggle('show');
            console.log('Has show class:', menu.classList.contains('show'));
        });

        // ‡∏õ‡∏¥‡∏î dropdown ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å
        document.addEventListener('click', function(e){
            if (!menu.contains(e.target) && !btn.contains(e.target)) {
                menu.classList.remove('show');
            }
        });
    } else {
        console.error('‡πÑ‡∏°‡πà‡∏û‡∏ö dropdown elements!');
    }
});
</script>

{% endblock %}